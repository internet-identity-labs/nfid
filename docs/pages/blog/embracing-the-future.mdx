---
title: "Embracing the Future of Standardisation: Revolutionize Web3 dApp Interactions - Part I"
date: "2023-12-12"
authors:
  - name: "Dan Ostrovski"
  - name: "Philipp Litzenberger"
---

import { StandardCard } from "../../components/standard.tsx"
import { Stack } from "../../components/stack.tsx"
import { Cards, Card, Tabs, Tab } from "nextra/components"
import { CardStackPlusIcon } from "@radix-ui/react-icons"

# Revolutionize Web3 dApp Interactions - Part I

The Internet Computer Protocol (ICP) has emerged as a pivotal force in the realm of decentralized
applications, with its rapid evolution and diverse applications ranging from Bitcoin marketplaces to
music streaming platforms. This dynamic growth has reshaped the way we interact with decentralized
systems, significantly reducing reliance on centralized infrastructures and leveraging the inherent
security of the protocol itself. However, the journey is not without its challenges.

## What is this post about?

The standards mentioned in this document are currently in progress. We warmly invite the ICP
community to contribute to the finalization of these standards. The purpose of this blog post is to
provide an update on the current status of the standards and present a draft implementation for
discussion. These ideas represent the [@IdentityMaxis](https://twitter.com/IdentityMaxis) (NFID
Team) vision and perspective on the potential benefits of this collaborative effort to enhance the
ICP ecosystem.

### NFID's Role in Facilitating Adoption

The NFID team is poised to release the `@nfid/identity-kit` package, as an open-source tool designed
to simplify the integration of these new standards. This package will enable developers to
effortlessly incorporate a broad spectrum of functionalities, paving the way for a more
interconnected and efficient application environment.

## Why ICP Wallet Standards are Important

In the ever-evolving landscape of Web3, one principle stands paramount: user choice. But how can we
enable this principle? We firmly believe that standardization is the key, not only in terms of
cryptography, but also in providing seamless access and interactions with crypto keys. In this
document, we will explore how the following standards will empower users and expand their options.


### Empowering User Choice in Web3

The ethos of user choice not only advocates for freedom in wallet selection but also demands
flexibility in interaction with various applications. The current state of ICP application
development, however, presents a significant hurdle. The need for individual wallet integrations
consumes vast amounts of time and resources, diverting attention from enhancing application
functionality.

Recognizing this, the ICP Community demanded a decentralized process of standardization. As a
result, standardization working groups were established to fulfill this need. The NFID Wallet team
highly appreciates this development and is pleased to contribute and lead the initiative of
standardizing the interaction between decentralized applications and wallets (referred to as
"signers" in this document). This will expand user options and enhance the developer experience.

### Streamlining the Development Process

By introducing standard wallet protocols, developers can bypass the cumbersome process of individual
wallet integrations. This standardization not only accelerates the development cycle but also opens
the door for a wider range of wallet options for users. The outcome is a more robust and
user-friendly ecosystem, where developers can focus on innovation rather than integration.

### Enhancing User Experience with Seamless Integration

Post-implementation of these standards, the most noticeable change for users will be the increased
compatibility between applications and a variety of wallets. This means users can manage assets more
efficiently and engage with applications in more dynamic ways. Features like secure data sharing
across applications without compromising privacy will become a norm.

## Exploring the Different ICP Wallet Standards

<Cards>
  <Card
    icon={<CardStackPlusIcon />}
    title={<StandardCard id="ICRC-25" description="Signer Interaction" />}
    href="#icrc-25-base-signer-interaction-standard"
  />
  <Card
    icon={<CardStackPlusIcon />}
    title={<StandardCard id="ICRC-31" description="Get Principals" />}
    href="#icrc-31-get-principals"
  />
  <Card
    icon={<CardStackPlusIcon />}
    title={<StandardCard id="ICRC-32" description="Sign Challenge" />}
    href="#icrc-32-sign-challenge"
  />
  <Card
    icon={<CardStackPlusIcon />}
    title={<StandardCard id="ICRC-33" description="Call Canister" />}
    href="#icrc-33-call-canister"
  />
  <Card
    icon={<CardStackPlusIcon />}
    title={<StandardCard id="ICRC-34" description="Get Delegation" />}
    href="#icrc-34-get-delegation"
  />
</Cards>

### ICRC-25 Base Signer Interaction Standard

This standard outlines a foundational protocol for communication between decentralized apps (dapps)
and signers. It specifies a set of messages to facilitate this interaction, ensuring a seamless and
secure exchange of information. The ICRC-25 aims to create a uniform language for dapps and signers,
enhancing interoperability and simplifying the development process.

#### Establish a Signer Connection:

We invite the community to contribute adapters for other signers to `@nfid/identity-kit`. But
obviously, you can also use custom adapters from your own or other external packages.

```typescript filename="Import and configure Signer"
import * as IdentityKit from "@nfid/identity-kit"

// adapter contributed to this open source package
import { NFID, II } from "@nfid/identity-kit/adapter"

// bring your own adapter
import { CUSTOM } from "@your-package/icrc-25-compatible-signer"

// NFID Signer
const nfid = NFID.config({
  providerUrl: "https://nfid.one",
})

// Internet Identity Signer
const ii = II.config({
  providerUrl: "https://identity.ic0.app",
})

// You're free to build your custom signer by complying to the specs.
const custom = CUSTOM.config({
  providerUrl: "https://your.signer.app",
})
```

```typescript filename="Initialize Identity Kit"
IdentityKit.config({
  derivationOrigin: "https://<canisterId>.ic0.app",
})

// Establish a connection with the Signer the user has selected:
const connection = await IdentityKit.connect({
  signer: custom,
})
```

#### Exploring available standards on a given signer:

To understand what standards are supported on a user selected signer, you will be able to call
`connection.getSupportedStandards()` which returns the list of strings representing the standard
references.

<Tabs items={['Method Call', 'Response Type']} defaultIndex="0">
<Tabs.Tab>

```typescript filename="Method Call"
const supported: SupportedStandards = await connection.getSupportedStandards()

```

```json filename="response data"
["ICRC-25", "ICRC-31", "ICRC-32"]
//^^^^^^^ has to be supported by all signers!
```
</Tabs.Tab>
<Tabs.Tab>
```typescript filename="Responst Type"
type Response = string[]

```
</Tabs.Tab>
</Tabs>

### ICRC-31 Get Principals

<Stack>
[![Status Badge](https://img.shields.io/badge/STATUS-DRAFT-ffcc00.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_31_get_principals.md)

[![Extension Badge](https://img.shields.io/badge/Extends-ICRC--25-ffcc222.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_25_signer_interaction_standard.md)

[![Standard Issue](https://img.shields.io/badge/ISSUE-ICRC--31-blue?logo=github)](https://github.com/dfinity/wg-identity-authentication/issues/112)
</Stack>

The `icrc31_get_principals` message plays a crucial role in identity management. It allows
applications to retrieve information about the identities managed by a signer, streamlining the
authentication process. This standard is pivotal in ensuring that users can manage their digital
identities efficiently and securely.

<Tabs items={['Method Call', 'Response Type']} defaultIndex="0">
<Tabs.Tab>
```typescript filename="Method Call"
const response: Response = await connection.getPrincipals()
```

```json filename="response data"
{
  "version": "1",
  "principals": ["gyu2j-2ni7o-o6yjt-n7lyh-x3sxq-zh7hp-sjvqe-t7oul-4eehb-2gvtt-Jae"]
}
```
</Tabs.Tab>
<Tabs.Tab>
```typescript filename="Response Type"
type Response = {
  version: string
  principals: string[]
}

```
</Tabs.Tab>
</Tabs>


### ICRC-32 Sign Challenge

<Stack>
[![Status Badge](https://img.shields.io/badge/STATUS-DRAFT-ffcc00.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_32_sign_challenge.md)

[![Extension Badge](https://img.shields.io/badge/Extends-ICRC--25-ffcc222.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_25_signer_interaction_standard.md)

[![Standard Issue](https://img.shields.io/badge/ISSUE-ICRC--32-blue?logo=github)](https://github.com/dfinity/wg-identity-authentication/issues/113)
</Stack>


The `icrc32_sign_challenge` method provides a secure mechanism for verifying ownership of user
identities. By facilitating cryptographic proofs, this standard strengthens the security framework
of applications, ensuring that user identities are protected and authenticated reliably.


<Tabs items={['Method Call', 'Request Type', 'Response Type']} defaultIndex="0"><Tabs.Tab>

```typescript filename="Method Call"
const response: Response = await connection.signChallange({
  principal: "rwlgt-iiaaa-aaaaa-aaaaa-cai", // optinal filter for identity that should sign 
  challenge: "UjwgsORvEzp98TmB1cAIseNOoD9+GLyN/1DzJ5+jxZM="
})
```

```json filename="response data"
{
  "version": "1",
  "signedChallenge": {
    "publicKey": "MFYwEAYHKoZIzj0CAQYFK4EEAAoDQgAEOTdHYwpFTr/oPXOfLQcteymk8AQE41VwPQ1W7Xpm0Zt1AY4+5aOnMAbAIjXEchxPuGbPWqPqwntXMPs3w4rOaA==",
    "signature": "bldf7qn7DC5NzTyX5kp4GpZHaEncE5/6n/Y8av3xjEwIVFAwmhyW0uM+WBXRTj4QbScot04dfaBXUOcSWF0IjQ=="
  }
}
```

</Tabs.Tab><Tabs.Tab>

```typescript filename="Request Type"
type Request = {
  version?: string
  principal?: string
  challenge: string
}

```

</Tabs.Tab><Tabs.Tab>

```typescript filename="Response Type"
type Response = {
  version: string
  signedChallenge: {
    publicKey: string
    signature: string
  }
}

```
</Tabs.Tab></Tabs>


### ICRC-33 Call Canister

<Stack>
[![Status Badge](https://img.shields.io/badge/STATUS-DRAFT-ffcc00.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_33_call_canister.md)

[![Extension Badge](https://img.shields.io/badge/Extends-ICRC--25-ffcc222.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_25_signer_interaction_standard.md)

[![Standard Issue](https://img.shields.io/badge/ISSUE-ICRC--33-blue?logo=github)](https://github.com/dfinity/wg-identity-authentication/issues/114)
</Stack>


This standard allows applications to request the execution of calls to third-party canisters by the
signer. By using the `icrc33_call_canister` method, applications can interact with a broader range
of services and functionalities, enhancing the versatility and reach of ICP-based applications.

<Tabs items={['Method Call', 'Request Type', 'Response Type']} defaultIndex="0"><Tabs.Tab>

```typescript filename="Method Call"
const response: Response = await connection.callCanister({
  canisterId: "xhy27-fqaaa-aaaao-a2hlq-ca",
  sender: "b7gqo-ulk5n-2kpo7-oalt7-p2kyl-o4j5l-kiuwo-eeybr-dab4l-ur6up-pqe",
  method: "transfer",
  arg: "RElETARte24AbAKzsNrDA2ithsqDBQFsA/vKAQKi3pTrBgHYo4yoDX0BAwEdV+ztKgq7E4l1ffuTuwEmw8AtYSjlrJ+WLO5ofQIAAMgB"
})
```

```json filename="Response Data"
{
  "version": "1",
  "contentMap": "2dn3p2NhcmdYTkRJREwEbXtuAGwCs7DawwNorYbKgwUBbAP7ygECot6U6wYB2KOMqA19AQMBHVfs7SoKuxOJdX37k7sBJsPALWEo5ayflizuaH0CAADIAWtjYW5pc3Rlcl9pZEoAAAAAAcDR1wEBbmluZ3Jlc3NfZXhwaXJ5GxeNX/65y4YAa21ldGhvZF9uYW1laHRyYW5zZmVyZW5vbmNlUFF4+hAimFhoqkdUcIchz0xscmVxdWVzdF90eXBlZGNhbGxmc2VuZGVyWB1q63Snu+4C5/fpWFu4nq1IpZxCYDEYA8XSPqPfAg==",
  "certificate": "2dn3omR0cmVlgwGDAYIEWCAPzKZJY/emKhi2GGtBrnHh4cdttATd4+9GtJrNCBepb4MBgwJOcmVxdWVzdF9zdGF0dXODAYIEWCCCgynUaonrKCCywghWCSk9BeDqMoI4yf15nxyU/5JZv4MBggRYIDG7WdzQ9sGWI1MpxizUzxubsEBuNkTT94UOZ9USbzNvgwGCBFggawwbTHxnPUzBAUhWBRjk0nzPs2fPpJlaIYtj5AvcX+ODAYIEWCDiFLyaWuMWjtVurCQcSgny/cqfM8S6qrdihVq7nPz1FoMCWCD/8jdeccvqHVYf06Hw7qPXIDNimC1Uyf47VsvgqKpPiIMBgwJFcmVwbHmCA1RESURMAWsCvIoBfcX+0gFxAQAABIMCRnN0YXR1c4IDR3JlcGxpZWSCBFgg7qZngcNt2+B/RuF44W3LRsKWXG6QQg2L6GdZgJ6Nb3+DAYIEWCAx3tU/mhHfX+wDzF003eSJYN8Nebou8rTeGyxr/rUa1YMCRHRpbWWCA0nw9+r88fjXxhdpc2lnbmF0dXJlWDCXNshvwWG1jGViP7ELePGHCThBw9mts45FxIy4gZATkUEsPeJ6y+cjbn2REmB0Soo="
}

```

</Tabs.Tab><Tabs.Tab>

```typescript filename="Request Type"
type Request = {
  version: string
  canisterId: string
  sender: string
  method: string
  arg: string
}

```

</Tabs.Tab><Tabs.Tab>

```typescript filename="Response Type"
type Response = {
  version: string
  contentMap: string
  certificate: string
}

```
</Tabs.Tab></Tabs>

### ICRC-34 Get Delegation

<Stack>
[![Status Badge](https://img.shields.io/badge/STATUS-DRAFT-ffcc00.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_3x_get_delegation.md)

[![Extension Badge](https://img.shields.io/badge/Extends-ICRC--25-ffcc222.svg)](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/icrc_25_signer_interaction_standard.md)

[![Standard Issue](https://img.shields.io/badge/ISSUE-ICRC--34-blue?logo=github)](https://github.com/dfinity/wg-identity-authentication/issues/115)
</Stack>


The `icrc34_get_delegation` method is designed to facilitate the delegation of identity management.
This process allows users to securely manage their identities and permissions, providing a flexible
and secure framework for identity delegation within the ICP ecosystem.

```typescript
const response = await connection.getDelegation({...})
```

## Conclusion

In conclusion, the introduction of ICP wallet standards is a significant stride towards a more
unified and user-friendly Web3 environment. These standards not only alleviate the developmental
challenges but also enrich the user experience, paving the way for a more interconnected and secure
digital future.
